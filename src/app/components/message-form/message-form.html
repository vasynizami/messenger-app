<div class="card">
  <h2>New Message</h2>
  <form
    [formGroup]="form"
    class="message-form-container"
    (ngSubmit)="onSubmit()"
  >
    <label for="phoneNumber" class="message-form-label">Phone Number</label>
    <input
      id="phoneNumber"
      type="text"
      mask="(000) 000-0000"
      [formControlName]="'phoneNumber'"
      class="phone-input"
      [disabled]="isSubmitting"
    />
    <label for="message" class="message-form-label">Message</label>
    <textarea
      id="message"
      rows="10"
      class="text-input no-resize"
      [formControlName]="'message'"
      [disabled]="isSubmitting"
    ></textarea>
    <div
      class="message-form-container-footer"
      [ngClass]="getCharacterCountClass(form.get('message')?.value || '')"
    >
      {{getCharacterCount()}}
    </div>

    <div *ngIf="submitError" class="error-message">{{submitError}}</div>

    <div class="message-form-buttons">
      <button
        type="button"
        class="clear-btn"
        (click)="onClear()"
        [disabled]="isSubmitting"
      >
        Clear
      </button>
      <button
        type="submit"
        class="submit-btn"
        [disabled]="!form.valid || isSubmitting"
      >
        <span *ngIf="!isSubmitting">Submit</span>
        <span *ngIf="isSubmitting">Submitting...</span>
      </button>
    </div>
  </form>
</div>
